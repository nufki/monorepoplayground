<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button></ion-back-button>
    </ion-buttons>
    <ion-title> Post Details </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div *ngIf="post$ | async as post; else loading">
    <united-post-item-view
      (showPostDetail)="onPostDetail($event)"
      (postLike)="onPostLike($event)"
      [post]="post"
    >
    </united-post-item-view>

    <united-comments-view
      *ngIf="comments$ | async as comments"
      (commentLike)="onCommentLike(post.id, $event)"
      (commentDelete)="onCommentDelete(post.id, $event)"
      (commentEdit)="onCommentEdit($event)"
      [comments]="comments"
    ></united-comments-view>
  </div>
</ion-content>

<div *ngIf="post$ | async as post; else loading">
  <div *ngIf="!editingComment">
    <united-create-comment
      *ngIf="comments$ | async as comments"
      (inputFocus)="inputFocus($event)"
      [initalFocus]="(comments$ | async)?.length === 0"
      [comments]="comments"
    >
    </united-create-comment>
  </div>

  <div *ngIf="editingComment">
    <united-edit-comment
      *ngIf="comments$ | async as comments"
      [comment]="editingComment"
      [postId]="(post$ | async)?.id"
      (editCancel)="onCommentCancelEdit($event)"
      (inputFocus)="inputFocus($event)"
      [focus]="showKeyboard"
    ></united-edit-comment>
  </div>
</div>

<ng-template #loading>
  <div class="vertical-center">
    <div class="center">
      <ion-spinner name="crescent"></ion-spinner>
    </div>
  </div>
</ng-template>
